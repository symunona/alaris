doctype html
html(lang='hu')
	head
		title Alaris Admin
		meta(charset="utf-8")
		meta(http-equiv="X-UA-Compatible", content="IE=edge")
		meta(name="viewport", content="width=device-width, initial-scale=1")
		link(rel="shortcut icon" href="/css/favicon.png")
		link(rel='stylesheet', href='/css/style.css')
		link(rel='stylesheet', href='/js/lib/vendor/tagselector/styles/token-input.css')
		link(rel="stylesheet", href="css/bootstrap.css")
		link(rel="stylesheet", href='js/lib/vendor/jqueryui/css/ui-darkness/jquery-ui-1.10.4.custom.min.css')
		link(rel="stylesheet", href='js/lib/vendor/timelinejs/timeline.css')
		
		script(type='text/javascript', src='js/lib/vendor/jquery-1.11.0.js')
		script(type='text/javascript', src='js/lib/vendor/jqueryui/js/jquery-ui-1.10.4.custom.min.js')
		script(type='text/javascript', src='js/lib/vendor/knockout-3.0.0.debug.js')
		script(type='text/javascript', src='js/lib/vendor/ckeditor/ckeditor.js')
		script(type='text/javascript', src='js/lib/vendor/tagselector/src/jquery.tokeninput.js')
		script(type='text/javascript', src='js/lib/vendor/knockout.wrap.js')
		script(type='text/javascript', src='js/lib/vendor/inheritance.js')
		script(type='text/javascript', src='js/lib/vendor/moment.min.js')
		script(type='text/javascript', src='js/bindings.js')
		script(type='text/javascript', src='js/base.js')
		script(type='text/javascript', src='js/lib/vendor/timelinejs/storyjs-embed.js')
		script(src='js/adminclient.js')
	body
		header    
			nav.navbar.navbar-inverse(role="navigation")
				div.container-fluid
					div.navbar-header
						a.navbar-brand(href="/") Alaris
						a.navbar-brand(href="/all") All
						a.navbar-brand(href="/stat") Stats						
						a.navbar-brand(href="/grader") Grader

		section.content.container-fluid.adminscreen
			div.row
				h2.col-xs-8 Entries 
					a(data-bind="click: addEntry", href='#')  +
			div.row(data-bind='if:editingEntry()')
				#editor.col-xs-8(data-bind='with: editingEntry')
					div
						button(data-bind="click: saveEntry") save
						button(data-bind="click: discardEntry") discard
						input#entrytitle(data-bind="value: title",placeholder='Title')
						input#entrytags(data-bind='value: tag', placeholder='tags with comma separation...')
						input#topic(data-bind='value: topic')
						textarea#entrycontent(data-bind='richText: body')
				div.contenter.col-xs-4.solidbg
					div#dropspace.dropspace(data-bind="dragupload: uploadconfig, style:{'background-image': 'url(' + selectedimg()+ ')'}, click: addImg.bind(this,selectedimg)")
					
					ul(data-bind="foreach: content").contentlist
						li(data-bind="text: filename, click: selectedimg.bind(this,'content/' + filename)")
										
			div
				button#first(data-bind="click: pager.first, enable: pager.hasPrev") |<
				button#prev(data-bind="click: pager.prev, enable: pager.hasPrev") <
				input(type="number",data-bind="value: pager.offset, enable:false")
				button#next(data-bind="click: pager.next, enable: pager.hasNext") >
				button#last(data-bind="click: pager.last, enable: pager.hasNext") >|
			div.row

				div.col-sm-8
					ul#entriesadmin.solidbg(data-bind='foreach: entries')
						li(data-bind="click: $root.editEntry.bind($data)")
							span.title(data-bind='text: title')
							// span.peek(data-bind='text: bodyshort')
							span.date(data-bind="text: moment(date()).format('YYYY. MM. DD. HH:mm')")
							span.topic(data-bind="text: topic")
							span.tag(data-bind='text: tag')
							// span.commands
								span.glyphicon.glyphicon-star.starme(title='star me')
								span.glyphicon.glyphicon-pencil(title='edit')				
								span.glyphicon.upvote.glyphicon-up-arrow(title='up')
								span.glyphicon.downvote.glyphicon-down-arrow(title='down')
								span.glyphicon.delete.glyphicon-trash(title='delete')
								span.glyphicon.glyphicon-eye-open(title='visibility')

			
			h2 Eras 
				a.button(data-bind="click: addTag") +

			div.solidbg
				div(data-bind='if:editingTag()').solidbg.col-xs-12
					div.tageditor.col-md-6.col-md-offset-3(data-bind='with: editingTag')
						input(data-bind="value: name",placeholder='Tagname')
						textarea(data-bind='value: style', placeholder='style parmeters')
						textarea(data-bind='value: customjs', placeholder='custom javascript')
						input(placeholder='background image',data-bind="value: background")
						input(placeholder='era start date',data-bind="datepicker: startdate")
						input(placeholder='era end date',data-bind="datepicker: enddate")
						button(data-bind="click: saveTag") save
						button(data-bind="click: discardTag") discard
				#timeline
					
				ul#tags(data-bind='foreach: tags').solidbg.col-xs-12
					li(data-bind="click: $root.editTag.bind($data)")
						span.name(data-bind='text: name') &nbsp;                                            
						span.tag.from(data-bind='text: moment(startdate()).format("YYYY. MM. DD")')
						span.tag -  
						span.tag.to(data-bind='text: moment(enddate()).format("YYYY. MM. DD")')
						span.commands
							span.glyphicon-edit(title='edit')
		//				
			h2 Deleted entries
			ul#deletedentries(data-bind='foreach: deletedEntries')
				li
					span.title(data-bind='text: title, click: $root.editEntry.bind($data)')
					// span.peek(data-bind='text: bodyshort')
					span.tags(data-bind='foreach: tags')
						span.tag(data-bind='text: name')
						span.from.tag(data-bind='text: startdate') -
						span.to.tag(data-bind='text: enddate')
					span.commands
						span.glyphicon.glyphicon-star.starme(title='star me')
						span.glyphicon-edit(title='edit')				
						span.upvote.glyphicon-up-arrow(title='up')
						span.downvote.glyphicon-down-arrow(title='down')
						span.delete.glyphicon-trash(title='delete')
						
						
					
